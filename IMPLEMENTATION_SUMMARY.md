# Реализация функционала для тренеров и управляющих

## Внесенные изменения

### 1. Управление пользователями (UserManagementScreen.tsx)

1. **Реализована функция добавления новых пользователей**:
   - Добавлена полноценная реализация `handleAddUser` функции
   - При добавлении пользователя создается учетная запись в Supabase Auth
   - Создается профиль пользователя в таблице `profiles`
   - По умолчанию устанавливается пароль "admin123" (пользователь должен сменить его позже)

2. **Улучшена фильтрация и поиск**:
   - Сохранена возможность поиска по имени и email
   - Сохранена возможность фильтрации по ролям
   - Добавлена возможность переключения между активными и удаленными пользователями

### 2. Результаты по дисциплинам (DisciplineResultsScreen.tsx)

1. **Реализована загрузка учеников тренера**:
   - Добавлена функция `loadStudentsForCoach` для получения списка учеников тренера
   - Ученики определяются по их регистрации на тренировки тренера

2. **Исправлена работа выпадающих меню**:
   - Добавлены состояния видимости для всех меню
   - Исправлена работа выбора дисциплин, учеников и возрастных групп

3. **Добавлена функция установки стандартных результатов**:
   - Добавлена возможность устанавливать стандартные результаты для дисциплин и возрастных групп
   - Реализована функция `handleSetStandardResult` для сохранения стандартных значений
   - Добавлено отображение текущего стандартного результата

4. **Добавлена функция просмотра топ результатов**:
   - Добавлена возможность просмотра топ-10 результатов по дисциплинам и возрастным группам
   - Реализована функция `loadTopResults` для загрузки лучших результатов
   - Добавлено отображение позиций в рейтинге

5. **Улучшено отображение результатов**:
   - Добавлен столбец "Стандарт" в таблицу результатов
   - Добавлено отображение разницы между результатом и стандартом
   - Улучшено форматирование значений в зависимости от единицы измерения

### 3. Сервис дисциплин (DisciplineService.ts)

1. **Добавлены функции для работы со стандартными результатами**:
   - `setStandardResult` - установка стандартного результата для дисциплины и возрастной группы
   - `getStandardResult` - получение стандартного результата для дисциплины и возрастной группы

2. **Исправлена функция получения топ результатов**:
   - Улучшена сортировка результатов (для времени меньшее значение лучше)

## Новые возможности

### Для тренеров:

1. **Добавление результатов учеников**:
   - Возможность ввода результатов с точностью до миллисекунд
   - Поддержка различных единиц измерения (время, дистанция, очки)
   - Привязка результатов к конкретным дисциплинам и возрастным группам

2. **Создание новых дисциплин**:
   - Возможность добавлять новые дисциплины для тренировок
   - Выбор единицы измерения для каждой дисциплины

3. **Управление стандартными результатами**:
   - Установка стандартных значений для каждой дисциплины и возрастной группы
   - Отслеживание отклонения результатов от стандартов

4. **Просмотр топ результатов**:
   - Возможность просмотра лучших результатов по каждой дисциплине
   - Рейтинговая система с местами участников

5. **Архивация результатов**:
   - Возможность исключать результаты из топа (для бывших учеников)
   - Результаты остаются в личных кабинетах учеников и родителей

### Для управляющих:

1. **Полное управление пользователями**:
   - Добавление новых пользователей с различными ролями
   - Удаление пользователей с сохранением данных в отдельной таблице
   - Восстановление удаленных пользователей
   - Поиск и фильтрация пользователей по различным критериям

## Технические детали

### Формат времени:

- Время хранится в миллисекундах
- Отображается в формате "мин сек мс" (например, "0 мин 22 сек 80 мс")

### Единицы измерения:

- **Время**: миллисекунды
- **Дистанция**: сантиметры
- **Очки**: целые числа

### Стандартные результаты:

- Для дисциплины "змейка" стандартный результат: 22080 мс (0 мин 22 сек 80 мс)
- Стандартные результаты могут быть установлены для каждой возрастной группы отдельно

## Использование

### Для тренеров:

1. Перейдите в раздел "Результаты по дисциплинам"
2. Для добавления результата нажмите "Добавить результат"
3. Выберите дисциплину, ученика, возрастную группу и введите результат
4. Для установки стандартного результата нажмите "Стандарт"
5. Для просмотра топ результатов нажмите "Топ"

### Для управляющих:

1. Перейдите в раздел "Управление пользователями"
2. Для добавления пользователя нажмите "Добавить пользователя"
3. Для удаления пользователя нажмите иконку корзины напротив пользователя
4. Для восстановления удаленного пользователя переключитесь на "Удаленные" и нажмите иконку восстановления
