# Работа с разными окружениями

## Описание

Это руководство описывает, как работать с разными окружениями в приложении футбольной школы: разработка (development), тестирование (test) и продакшен (production).

## Типы окружений

### Development (Разработка)

Используется локально разработчиками для разработки и тестирования новых функций.

Файл конфигурации: [.env.development](.env.development)

### Test (Тестирование)

Используется для автоматического тестирования и интеграционного тестирования.

Файл конфигурации: [.env.test](.env.test)

### Production (Продакшн)

Используется в рабочей среде на серверах.

Файл конфигурации: [.env.production](.env.production)

## Файл примера

[.env.example](.env.example) содержит примеры всех необходимых переменных окружения.

## Переменные окружения

### Общие переменные

| Переменная | Описание      | Пример                      |
| ---------- | ------------- | --------------------------- |
| NODE_ENV   | Тип окружения | development/test/production |
| PORT       | Порт сервера  | 3000                        |

### Переменные базы данных

| Переменная   | Описание                      | Пример                              |
| ------------ | ----------------------------- | ----------------------------------- |
| DATABASE_URL | URL подключения к базе данных | postgresql://user:pass@host:port/db |
| DB_HOST      | Хост базы данных              | localhost                           |
| DB_PORT      | Порт базы данных              | 5432                                |
| DB_NAME      | Имя базы данных               | goalschool                          |
| DB_USER      | Пользователь базы данных      | postgres                            |
| DB_PASSWORD  | Пароль пользователя           | password                            |
| DB_SSL       | Использовать SSL              | true/false                          |

### Переменные безопасности

| Переменная         | Описание                       | Пример          |
| ------------------ | ------------------------------ | --------------- |
| JWT_SECRET         | Секретный ключ для JWT         | your_jwt_secret |
| BCRYPT_SALT_ROUNDS | Количество раундов хеширования | 10              |

## Установка окружения

### Локальная разработка

1. Скопируйте [.env.example](.env.example) в `.env`:

   ```bash
   cp .env.example .env
   ```

2. Отредактируйте `.env` с вашими значениями

### Тестирование

1. Используйте [.env.test](.env.test) как шаблон
2. Установите переменные окружения перед запуском тестов

### Продакшн

1. Используйте [.env.production](.env.production) как шаблон
2. Установите переменные окружения на сервере

## Проверка окружения

Для проверки текущего окружения выполните:

```bash
node scripts/check-env.js
```

## Рекомендации

### Безопасность

1. Не храните файлы `.env` в системе контроля версий
2. Используйте разные секретные ключи для разных окружений
3. Не используйте примеры из [.env.example](.env.example) в production

### Консистентность

1. Поддерживайте одинаковую структуру переменных во всех окружениях
2. Документируйте все переменные в [.env.example](.env.example)
3. Проверяйте наличие всех необходимых переменных перед запуском

### Автоматизация

1. Используйте скрипт проверки окружения в CI/CD pipeline
2. Автоматически устанавливайте переменные окружения в deployment скриптах
