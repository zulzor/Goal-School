@echo off
title –î–µ–ø–ª–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –§—É—Ç–±–æ–ª—å–Ω–∞—è –®–∫–æ–ª–∞

REM –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
if "%1"=="" goto help
if "%1"=="web" goto build_web
if "%1"=="android" goto build_android
if "%1"=="ios" goto build_ios

:help
echo üì¶ –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è "–§—É—Ç–±–æ–ª—å–Ω–∞—è –®–∫–æ–ª–∞"
echo.
echo ‚ÑπÔ∏è  –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
echo    deploy.bat web      - –°–±–æ—Ä–∫–∞ –≤–µ–±-–≤–µ—Ä—Å–∏–∏
echo    deploy.bat android  - –°–±–æ—Ä–∫–∞ Android APK
echo    deploy.bat ios      - –°–±–æ—Ä–∫–∞ iOS IPA
echo.
echo üîß –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:
echo    1. –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã (npm install)
echo    2. –£ –≤–∞—Å –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç—ã –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö
goto end

:build_web
echo üåê –°–±–æ—Ä–∫–∞ –≤–µ–±-–≤–µ—Ä—Å–∏–∏...
npx expo build:web
if %errorlevel% neq 0 (
    echo ‚ùå –û—à–∏–±–∫–∞ —Å–±–æ—Ä–∫–∏ –≤–µ–±-–≤–µ—Ä—Å–∏–∏
    pause
    exit /b 1
)

echo ‚úÖ –í–µ–±-–≤–µ—Ä—Å–∏—è —Å–æ–±—Ä–∞–Ω–∞ —É—Å–ø–µ—à–Ω–æ!
echo üìÅ –§–∞–π–ª—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –ø–∞–ø–∫–µ "web-build"
echo üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:
echo    1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–∞–ø–∫–∏ "web-build" –Ω–∞ –≤–∞—à —Ö–æ—Å—Ç–∏–Ω–≥
echo    2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Ö–æ—Å—Ç–∏–Ω–≥
echo    3. –ü—Ä–∏–≤—è–∂–∏—Ç–µ –¥–æ–º–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
goto end

:build_android
echo ü§ñ –°–±–æ—Ä–∫–∞ Android APK...

REM –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è EAS CLI
eas --version >nul 2>&1
if %errorlevel% neq 0 (
    echo üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ EAS CLI...
    npm install -g eas-cli
)

echo üîê –í—Ö–æ–¥ –≤ Expo (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)...
npx eas login

echo üî® –°–±–æ—Ä–∫–∞ APK...
npx eas build --platform android --profile production
if %errorlevel% neq 0 (
    echo ‚ùå –û—à–∏–±–∫–∞ —Å–±–æ—Ä–∫–∏ APK
    pause
    exit /b 1
)

echo ‚úÖ APK —Å–æ–±—Ä–∞–Ω —É—Å–ø–µ—à–Ω–æ!
echo üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:
echo    1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ RuStore Console
echo    2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
echo    3. –ó–∞–≥—Ä—É–∑–∏—Ç–µ APK —Ñ–∞–π–ª
echo    4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
echo    5. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é
goto end

:build_ios
echo üì± –°–±–æ—Ä–∫–∞ iOS IPA...

REM –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è EAS CLI
eas --version >nul 2>&1
if %errorlevel% neq 0 (
    echo üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ EAS CLI...
    npm install -g eas-cli
)

echo üîê –í—Ö–æ–¥ –≤ Expo (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)...
npx eas login

echo üî® –°–±–æ—Ä–∫–∞ IPA...
npx eas build --platform ios --profile production
if %errorlevel% neq 0 (
    echo ‚ùå –û—à–∏–±–∫–∞ —Å–±–æ—Ä–∫–∏ IPA
    pause
    exit /b 1
)

echo ‚úÖ IPA —Å–æ–±—Ä–∞–Ω —É—Å–ø–µ—à–Ω–æ!
echo üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:
echo    1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ App Store Connect
echo    2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
echo    3. –ó–∞–≥—Ä—É–∑–∏—Ç–µ IPA —Ñ–∞–π–ª
echo    4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
echo    5. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é
goto end

:end
echo üéâ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!
pause