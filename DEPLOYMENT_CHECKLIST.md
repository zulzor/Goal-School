# Чеклист развертывания на Beget

## Подготовка

### [ ] 1. Проверка локального окружения

- [ ] Node.js установлен (версия 18.x или выше)
- [ ] npm установлен
- [ ] Git установлен
- [ ] Доступ к репозиторию приложения

### [ ] 2. Подготовка кода

- [ ] Последняя версия кода из репозитория
- [ ] Все зависимости установлены (`npm install`)
- [ ] Пройдены все локальные тесты (`npm test`)
- [ ] Создана веб-сборка (`npm run build`)

### [ ] 3. Подготовка базы данных PostgreSQL

- [ ] Создана база данных PostgreSQL 16.4 в панели Beget
- [ ] Записаны параметры подключения:
  - [ ] Хост
  - [ ] Порт
  - [ ] Имя базы данных
  - [ ] Имя пользователя
  - [ ] Пароль

## Настройка на Beget

### [ ] 4. Создание сайта на Beget

- [ ] Создан новый сайт в панели управления Beget
- [ ] Выбран домен или поддомен
- [ ] Настроен DNS (если необходимо)

### [ ] 5. Загрузка файлов

- [ ] Создан архив веб-сборки (`web-build`)
- [ ] Загружен архив через файловый менеджер Beget
- [ ] Распакован архив в корневую директорию сайта

### [ ] 6. Настройка Node.js приложения

- [ ] Перешли на вкладку "Node.js" в настройках сайта
- [ ] Указали точку входа: `server.js`
- [ ] Установили зависимости:
  ```
  npm install express pg dotenv bcryptjs
  ```

### [ ] 7. Настройка переменных окружения

- [ ] Добавлены переменные окружения в панели Beget:
  - [ ] `DATABASE_URL=postgresql://имя_пользователя:пароль@хост:порт/имя_базы_данных`
  - [ ] `DB_HOST=хост_из_панели_управления`
  - [ ] `DB_PORT=порт_из_панели_управления`
  - [ ] `DB_NAME=имя_базы_данных`
  - [ ] `DB_USER=имя_пользователя`
  - [ ] `DB_PASSWORD=пароль`
  - [ ] `NODE_ENV=production`
  - [ ] `PORT=3000`
  - [ ] `JWT_SECRET=ваш_секретный_ключ_jwt`
  - [ ] `BCRYPT_SALT_ROUNDS=10`

## Инициализация приложения

### [ ] 8. Инициализация базы данных через SSH

- [ ] Включили SSH-доступ в панели Beget
- [ ] Подключились по SSH
- [ ] Скопировали необходимые файлы:
  ```
  scp -r src/config/db.ts имя_пользователя@хост_ssh:~
  scp -r src/services/DatabaseInitService.ts имя_пользователя@хост_ssh:~
  scp -r scripts/init-database.js имя_пользователя@хост_ssh:~
  ```
- [ ] Выполнили инициализацию базы данных:
  ```
  node init-database.js
  ```

### [ ] 9. Создание тестовых пользователей

- [ ] Скопировали файл скрипта:
  ```
  scp -r scripts/create-test-users.js имя_пользователя@хост_ssh:~
  ```
- [ ] Выполнили создание тестовых пользователей:
  ```
  node create-test-users.js
  ```

## Запуск и тестирование

### [ ] 10. Запуск приложения

- [ ] Перезапустили Node.js приложение в панели Beget
- [ ] Проверили логи на наличие ошибок
- [ ] Убедились, что приложение запущено на порту 3000

### [ ] 11. Тестирование функциональности

- [ ] Открыли сайт в браузере
- [ ] Проверили загрузку главной страницы
- [ ] Проверили вход с тестовыми учетными данными:
  - [ ] Администратор: admin@example.com / admin123
  - [ ] Менеджер: manager@example.com / manager123
  - [ ] Тренер: coach@example.com / coach123
  - [ ] Родитель: parent@example.com / parent123
  - [ ] Ученик: student@example.com / student123
- [ ] Проверили основные функции приложения:
  - [ ] Просмотр новостей
  - [ ] Просмотр расписания
  - [ ] Просмотр плана питания
  - [ ] Просмотр посещаемости (для тренеров)
  - [ ] Просмотр прогресса (для тренеров и родителей)

### [ ] 12. Проверка базы данных

- [ ] Проверили сохранение данных в базе данных
- [ ] Проверили чтение данных из базы данных
- [ ] Убедились, что все таблицы созданы корректно

## Финальные шаги

### [ ] 13. Настройка домена (если необходимо)

- [ ] Добавили домен в панели управления Beget
- [ ] Настроили DNS-записи
- [ ] Привязали домен к сайту

### [ ] 14. Настройка HTTPS

- [ ] Включили SSL-сертификат в панели Beget
- [ ] Проверили доступ через HTTPS

### [ ] 15. Резервное копирование

- [ ] Создали резервную копию базы данных
- [ ] Создали резервную копию файлов приложения

### [ ] 16. Документирование

- [ ] Задокументировали параметры развертывания
- [ ] Записали учетные данные для доступа
- [ ] Создали инструкцию по обслуживанию

## Обслуживание

### [ ] 17. Мониторинг

- [ ] Настроили мониторинг доступности сайта
- [ ] Настроили оповещения о сбоях
- [ ] Проверили логи приложения

### [ ] 18. Обновление

- [ ] Создали процедуру обновления приложения
- [ ] Протестировали процедуру отката изменений

## Контактная информация

### Поддержка

- [ ] Контактное лицо: **\*\***\_\_\_\_**\*\***
- [ ] Email: **\*\***\_\_\_\_**\*\***
- [ ] Телефон: **\*\***\_\_\_\_**\*\***

### Доступы

- [ ] Панель управления Beget: **\*\***\_\_\_\_**\*\***
- [ ] Данные для SSH: **\*\***\_\_\_\_**\*\***
- [ ] Параметры базы данных: **\*\***\_\_\_\_**\*\***

---

✅ Развертывание завершено успешно!
❌ Обнаружены проблемы, требующие решения.
