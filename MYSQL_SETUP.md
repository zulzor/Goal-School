# Настройка MySQL 8.0 для приложения GoalSchool

## Обзор

Это руководство поможет вам настроить MySQL 8.0 для использования с приложением GoalSchool. Вы можете использовать MySQL как для локальной разработки, так и для развертывания на Beget.

## Параметры подключения

### Для локальной разработки:

```
Хост: localhost
Порт: 3306
Имя базы данных: goalschool
Имя пользователя: root
Пароль: (пустой или ваш локальный пароль)
```

### Для развертывания на Beget:

```
Сервер для подключения сайтов: localhost
Имя пользователя: mrzulonz_db_ars (совпадает с именем БД)
Имя БД: mrzulonz_db_ars
Пароль: [ваш пароль]
```

## Настройка переменных окружения

### Для локальной разработки

Файл `.env` уже содержит правильные параметры для локальной разработки:

```env
# MySQL Database Configuration for Development
MYSQL_HOST=localhost
MYSQL_PORT=3306
MYSQL_DATABASE=goalschool
MYSQL_USER=root
MYSQL_PASSWORD=
```

### Для развертывания на Beget

При развертывании на Beget обновите файл `.env` в корне проекта с вашими данными от Beget. **ВАЖНО: Замените `ваш_пароль_от_базы_данных` на реальный пароль от вашей базы данных**:

```env
# MySQL Database Configuration for Beget
MYSQL_HOST=localhost
MYSQL_PORT=3306
MYSQL_DATABASE=mrzulonz_db_ars
MYSQL_USER=mrzulonz_db_ars
MYSQL_PASSWORD=ваш_реальный_пароль_от_базы_данных
```

## Установка и настройка MySQL локально (если нужно)

Если у вас еще не установлен MySQL локально:

1. Скачайте и установите MySQL Community Server с официального сайта
2. Запустите MySQL сервер
3. Создайте базу данных:
   ```sql
   CREATE DATABASE goalschool;
   ```

## Инициализация базы данных

После настройки переменных окружения выполните инициализацию базы данных:

```bash
node scripts/init-mysql-database.js
```

Этот скрипт создаст все необходимые таблицы в вашей базе данных MySQL.

## Переключение на MySQL в приложении

1. Запустите приложение
2. Перейдите в профиль пользователя
3. Нажмите "Настройки базы данных"
4. Выберите "MySQL" в качестве типа базы данных
5. Проверьте подключение и создайте тестовых пользователей

## Создание таблиц

Скрипт инициализации создаст следующие таблицы:

1. `users` - пользователи системы
2. `attendance` - посещаемость тренировок
3. `progress` - прогресс учеников
4. `nutrition` - план питания
5. `news` - новости и объявления
6. `schedule` - расписание тренировок
7. `skills` - навыки учеников
8. `achievements` - достижения учеников

## Тестирование подключения

Для проверки подключения к базе данных выполните:

```bash
node scripts/check-database.js
```

## Резервное копирование

### Для локальной разработки:

```bash
mysqldump -u root -p goalschool > backup.sql
```

### Для развертывания на Beget:

Используйте стандартные инструменты Beget или:

```bash
mysqldump -h localhost -u mrzulonz_db_ars -p mrzulonz_db_ars > backup.sql
```

## Устранение неполадок

### Ошибка подключения

Если возникает ошибка подключения:

1. Проверьте правильность параметров в файле `.env`
2. Убедитесь, что MySQL сервер запущен
3. Проверьте, что база данных существует
4. Убедитесь, что у пользователя есть права доступа

### Ошибка создания таблиц

Если возникают ошибки при создании таблиц:

1. Проверьте привилегии пользователя базы данных
2. Убедитесь, что у пользователя есть права на создание таблиц
3. Проверьте логи MySQL на наличие ошибок

## Безопасность

1. Не храните пароль базы данных в открытом виде в репозитории
2. Используйте разные пароли для разных окружений
3. Регулярно обновляйте пароли
4. Ограничьте доступ к базе данных только необходимыми IP адресами

## Поддержка

Если у вас возникли проблемы с настройкой MySQL, обратитесь в службу поддержки Beget или создайте issue в репозитории проекта.
