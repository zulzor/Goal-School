# Деплой веб-приложения на сервер Beget

## Описание

Этот документ описывает процесс деплоя веб-версии приложения на сервер Beget с использованием предоставленного SSH-ключа.

## Подготовка

1. Убедитесь, что у вас есть SSH-ключ по пути: `C:\Users\jolab\.ssh\id_rsa`
2. Убедитесь, что папка `web-export` содержит актуальную версию веб-приложения
3. Убедитесь, что у вас установлен PowerShell и OpenSSH клиент

## Запуск деплоя

### Вариант 1: Через bat-файл (рекомендуется)

1. Запустите файл `deploy_to_beget.bat` двойным кликом
2. Подтвердите начало операции (если не использован флаг -SkipConfirmation)
3. Дождитесь завершения процесса

### Вариант 2: Через PowerShell напрямую

1. Откройте PowerShell
2. Перейдите в папку проекта:
   ```powershell
   cd "C:\Users\jolab\Desktop\Goal-School"
   ```
3. Запустите скрипт:
   ```powershell
   .\deploy_to_beget.ps1
   ```

### Вариант 3: Без подтверждения

Для автоматического запуска без подтверждения:

```powershell
.\deploy_to_beget.ps1 -SkipConfirmation
```

## Что делает скрипт

1. Создает временный архив содержимого папки `web-export`
2. Подключается к серверу Beget через SFTP
3. Удаляет все файлы в публичной директории сайта
4. Загружает архив с новой версией
5. Распаковывает архив на сервере
6. Устанавливает правильные права доступа к файлам
7. Очищает временные файлы

## Параметры подключения

- **SSH ключ**: `C:\Users\jolab\.ssh\id_rsa`
- **Пользователь**: `mrzulonz`
- **Сервер**: `mrzulonz.beget.tech`
- **Путь на сервере**: `/home/m/mrzulonz/mrzulonz.beget.tech/public_html`

## Возможные проблемы и решения

### 1. Ошибка подключения по SSH

- Проверьте, что SSH-ключ существует по указанному пути
- Убедитесь, что ключ не поврежден
- Проверьте параметры подключения

### 2. Ошибка при создании архива

- Убедитесь, что папка `web-export` существует и не пуста
- Проверьте права доступа к папке

### 3. Ошибка при загрузке файлов

- Проверьте подключение к интернету
- Убедитесь, что сервер Beget доступен
- Проверьте, что у вас достаточно свободного места на сервере

### 4. Сайт не отображается после деплоя

- Подождите 1-2 минуты для обновления кэша сервера
- Попробуйте обновить страницу с обходом кэша (Ctrl+F5)
- Проверьте файлы через файловый менеджер хостинга

## Проверка результата

После успешного выполнения скрипта сайт будет доступен по адресу:
http://mrzulonz.beget.tech

## Безопасность

- SSH-ключ должен храниться в безопасном месте
- Не передавайте SSH-ключ третьим лицам
- Регулярно проверяйте логи доступа к серверу

## Обслуживание

Для повторного деплоя достаточно запустить скрипт снова. Он автоматически удалит предыдущую версию и загрузит новую.
